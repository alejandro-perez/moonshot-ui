/* moonshot-utils.c generated by valac 0.10.4, the Vala compiler
 * generated from moonshot-utils.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gtk/gtk.h>
#include <gdk-pixbuf/gdk-pixdata.h>
#include <stdio.h>

#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))



GdkPixbuf* find_icon_sized (const char* name, GtkIconSize icon_size);
GdkPixbuf* find_icon (const char* name, gint size);



#line 5 "moonshot-utils.vala"
GdkPixbuf* find_icon_sized (const char* name, GtkIconSize icon_size) {
#line 26 "moonshot-utils.c"
	GdkPixbuf* result = NULL;
	gint width = 0;
	gint height = 0;
#line 5 "moonshot-utils.vala"
	g_return_val_if_fail (name != NULL, NULL);
#line 8 "moonshot-utils.vala"
	gtk_icon_size_lookup (icon_size, &width, &height);
#line 34 "moonshot-utils.c"
	result = find_icon (name, width);
#line 9 "moonshot-utils.vala"
	return result;
#line 38 "moonshot-utils.c"
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


#line 17 "moonshot-utils.vala"
GdkPixbuf* find_icon (const char* name, gint size) {
#line 49 "moonshot-utils.c"
	GdkPixbuf* result = NULL;
	GError * _inner_error_ = NULL;
#line 17 "moonshot-utils.vala"
	g_return_val_if_fail (name != NULL, NULL);
#line 54 "moonshot-utils.c"
	{
		GtkIconTheme* icon_theme;
		GdkPixbuf* _tmp0_;
#line 33 "moonshot-utils.vala"
		icon_theme = _g_object_ref0 (gtk_icon_theme_get_default ());
#line 34 "moonshot-utils.vala"
		_tmp0_ = gtk_icon_theme_load_icon (icon_theme, name, size, GTK_ICON_LOOKUP_FORCE_SIZE, &_inner_error_);
#line 62 "moonshot-utils.c"
		if (_inner_error_ != NULL) {
			_g_object_unref0 (icon_theme);
			goto __catch7_g_error;
		}
		result = _tmp0_;
		_g_object_unref0 (icon_theme);
#line 34 "moonshot-utils.vala"
		return result;
#line 71 "moonshot-utils.c"
	}
	goto __finally7;
	__catch7_g_error:
	{
		GError * e;
		e = _inner_error_;
		_inner_error_ = NULL;
		{
#line 39 "moonshot-utils.vala"
			fprintf (stdout, "Error loading icon '%s': %s\n", name, e->message);
#line 82 "moonshot-utils.c"
			result = NULL;
			_g_error_free0 (e);
#line 40 "moonshot-utils.vala"
			return result;
#line 87 "moonshot-utils.c"
		}
	}
	__finally7:
	{
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
}




